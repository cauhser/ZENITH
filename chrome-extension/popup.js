document.addEventListener('DOMContentLoaded', function() {  console.log('Popup DOM loaded');  initializePopup();  addEventListeners();  addAlertButtonListeners();});function addAlertButtonListeners() {  const doneButton = document.querySelector('.alert-buttons .btn-primary');  const laterButton = document.querySelector('.alert-buttons .btn-secondary');  if (doneButton) {    doneButton.onclick = function() {      console.log('Done button clicked');      handleAlertAction('done');    };  }  if (laterButton) {    laterButton.onclick = function() {      console.log('Later button clicked');      handleAlertAction('later');    };  }}function initializePopup() {  console.log('Initializing popup');  updateWellnessScore();  updateInsights();  setupLiveIndicator();}function updateWellnessScore() {  const scoreValue = document.querySelector('.score-value');  const scoreChange = document.querySelector('.score-change');  const score = Math.floor(Math.random() * 20) + 75;   const change = Math.floor(Math.random() * 10) + 1;   if (scoreValue) {    scoreValue.textContent = `ðŸ˜Š ${score}%`;  }  if (scoreChange) {    scoreChange.textContent = `â†‘ ${change}% from yesterday`;  }}function updateInsights() {}function setupLiveIndicator() {}function addEventListeners() {  console.log('Adding event listeners');  const eyeIcon = document.querySelector('.eye-icon');  const settingsIcon = document.querySelector('.settings-icon');  if (eyeIcon) {    eyeIcon.addEventListener('click', function() {      console.log('Eye icon clicked');      chrome.runtime.sendMessage({action: 'toggleEyeTracking'}, function(response) {        if (chrome.runtime.lastError) {          console.error('Error sending message:', chrome.runtime.lastError);          showConfirmation('Error toggling eye tracking');          return;        }        showConfirmation('Eye tracking toggled');      });    });  }  if (settingsIcon) {    settingsIcon.addEventListener('click', function() {      console.log('Settings icon clicked');      chrome.runtime.sendMessage({action: 'openSettings'}, function(response) {        if (chrome.runtime.lastError) {          console.error('Error sending message:', chrome.runtime.lastError);          showConfirmation('Error opening settings');          return;        }        showConfirmation('Opening settings...');      });    });  }  const pauseButton = document.querySelector('.action-buttons .btn-secondary');  if (pauseButton) {    pauseButton.addEventListener('click', function() {      console.log('Pause tracking button clicked');      chrome.runtime.sendMessage({action: 'toggleTracking'}, function(response) {        if (chrome.runtime.lastError) {          console.error('Error sending message:', chrome.runtime.lastError);          showConfirmation('Error: Could not toggle tracking');          return;        }        if (response && response.trackingPaused !== undefined) {          pauseButton.textContent = response.trackingPaused ? 'Resume Tracking' : 'Pause Tracking';          showConfirmation(response.trackingPaused ? 'Tracking paused' : 'Tracking resumed');        }      });    });  }  const dashboardButton = document.querySelector('.action-buttons .btn-primary');  if (dashboardButton) {    dashboardButton.addEventListener('click', function() {      console.log('View dashboard button clicked');      chrome.runtime.sendMessage({action: 'openDashboard'}, function(response) {        if (chrome.runtime.lastError) {          console.error('Error sending message:', chrome.runtime.lastError);          chrome.tabs.create({            url: chrome.runtime.getURL('dashboard.html')          });          return;        }        showConfirmation('Opening dashboard...');      });    });  }}function handleAlertAction(action) {  console.log('Handling alert action:', action);  chrome.runtime.sendMessage({    action: 'alertAction',    alertAction: action  }, function(response) {    if (chrome.runtime.lastError) {      console.error('Error sending message:', chrome.runtime.lastError);      showConfirmation('Error handling alert');      return;    }    const alertSection = document.querySelector('.alert-section');    console.log('Alert section element:', alertSection);    if (alertSection) {      alertSection.style.display = 'none';      alertSection.style.visibility = 'hidden';      alertSection.style.height = '0';      alertSection.style.overflow = 'hidden';      alertSection.style.padding = '0';      alertSection.style.margin = '0';      console.log('Alert section hidden');    } else {      console.log('Alert section not found');    }    showConfirmation(`Alert marked as ${action}`);    const alertSectionParent = document.querySelector('.alert-section')?.parentNode;    console.log('Alert section parent:', alertSectionParent);    if (alertSectionParent) {      const existingNoAlerts = document.querySelector('.no-alerts-message');      if (!existingNoAlerts) {        const noAlertsMessage = document.createElement('div');        noAlertsMessage.className = 'no-alerts-message';        noAlertsMessage.innerHTML = '<p style="text-align: center; color: #64748b; margin: 15px 0; font-style: italic; padding: 10px; background-color: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">No recent alerts</p>';        if (alertSection) {          alertSectionParent.insertBefore(noAlertsMessage, alertSection.nextSibling);        } else {          alertSectionParent.insertBefore(noAlertsMessage, alertSectionParent.firstChild);        }        console.log('No alerts message added');      }    }  });}function showConfirmation(message) {  console.log('Showing confirmation:', message);  const existingNotification = document.querySelector('.confirmation-notification');  if (existingNotification) {    existingNotification.remove();  }  const notification = document.createElement('div');  notification.className = 'confirmation-notification';  notification.textContent = message;  notification.style.position = 'fixed';  notification.style.bottom = '20px';  notification.style.left = '50%';  notification.style.transform = 'translateX(-50%)';  notification.style.backgroundColor = 'rgba(22, 103, 201, 0.9)';  notification.style.color = 'white';  notification.style.padding = '12px 20px';  notification.style.borderRadius = '12px';  notification.style.zIndex = '1000';  notification.style.fontSize = '14px';  notification.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';  notification.style.fontWeight = '600';  notification.style.textAlign = 'center';  notification.style.width = 'calc(100% - 40px)';  document.body.appendChild(notification);  setTimeout(() => {    if (notification.parentNode) {      notification.parentNode.removeChild(notification);    }  }, 2000);}chrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {  console.log('Received message:', request);  if (request.action === 'updateScore') {    updateWellnessScore();    sendResponse({success: true});  }  return true; });