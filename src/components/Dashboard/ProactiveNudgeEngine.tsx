import React, { useState, useEffect } from 'react';import { useSelector } from 'react-redux';import { useNavigate } from 'react-router-dom';import { RootState } from '../../store';import { EmotionData } from '../../types/wellness';interface Alert {  id: string;  message: string;  type: 'warning' | 'info' | 'success';  timestamp: number;  actionTaken: boolean;}const ProactiveNudgeEngine: React.FC = () => {  const navigate = useNavigate();  const [alerts, setAlerts] = useState<Alert[]>([]);  const [visibleAlert, setVisibleAlert] = useState<Alert | null>(null);  const wellnessData = useSelector((state: RootState) => state.wellness);  const emotionData = wellnessData.emotionalTrends;  const screenTime = wellnessData.screenTime;  const focusSessions = wellnessData.attentionMetrics?.focusSessions || 0;  useEffect(() => {    const generateAlerts = () => {      const newAlerts: Alert[] = [];      const currentTime = new Date().getHours();      if (currentTime >= 22 && screenTime > 60) {        newAlerts.push({          id: '1',          message: "You usually feel anxious after 1h on social media. You've been on for 58 mins.",          type: 'warning',          timestamp: Date.now(),          actionTaken: false        });      }      if (emotionData.length > 0) {        const lastEmotion = emotionData[emotionData.length - 1];        const stressLevel = lastEmotion.emotion === 'stressed' || lastEmotion.emotion === 'anxious' ?           lastEmotion.intensity : 0;        if (stressLevel > 70) {          newAlerts.push({            id: '2',            message: "Your stress levels are high. Consider taking a 5-minute breathing break.",            type: 'warning',            timestamp: Date.now(),            actionTaken: false          });        }      }      if (focusSessions > 120) {        newAlerts.push({          id: '3',          message: "Great focus session! You've been productive for over 2 hours.",          type: 'success',          timestamp: Date.now(),          actionTaken: false        });      }      setAlerts(newAlerts);      if (newAlerts.length > 0 && !visibleAlert) {        setVisibleAlert(newAlerts[0]);      }    };    const interval = setInterval(generateAlerts, 300000);    generateAlerts();     return () => clearInterval(interval);  }, [wellnessData, visibleAlert]);  const handleTakeBreak = () => {    if (visibleAlert) {      setVisibleAlert(null);      setAlerts(prev => prev.filter(alert => alert.id !== visibleAlert.id));      navigate('/relaxation');    }  };  const handleImOkay = () => {    if (visibleAlert) {      setVisibleAlert(null);      setAlerts(prev => prev.filter(alert => alert.id !== visibleAlert.id));    }  };  if (!visibleAlert) return null;  return (    <div className="proactive-nudge-overlay">      <div className="nudge-alert">        <div className="alert-content">          <div className={`alert-icon ${visibleAlert.type}`}>            {visibleAlert.type === 'warning' && '⚠️'}            {visibleAlert.type === 'info' && 'ℹ️'}            {visibleAlert.type === 'success' && '✅'}          </div>          <p>{visibleAlert.message}</p>        </div>        <div className="alert-actions">          {visibleAlert.type === 'warning' && (            <>              <button className="primary-button" onClick={handleTakeBreak}>                Take a break?              </button>              <button className="secondary-button" onClick={handleImOkay}>                I'm okay              </button>            </>          )}          {visibleAlert.type === 'success' && (            <button className="secondary-button" onClick={handleImOkay}>              Got it!            </button>          )}        </div>      </div>    </div>  );};export default ProactiveNudgeEngine;