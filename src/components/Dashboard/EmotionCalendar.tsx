import React, { useState } from 'react';import { EmotionData } from '../../types/wellness';import './EmotionCalendar.css';interface EmotionCalendarProps {  data: EmotionData[];}const EmotionCalendar: React.FC<EmotionCalendarProps> = ({ data }) => {  const [currentDate, setCurrentDate] = useState(new Date());  const firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);  const lastDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);  const firstDayOfWeek = firstDayOfMonth.getDay();  const daysInMonth = lastDayOfMonth.getDate();  const emotionDataByDate = data.reduce((acc, item) => {    const date = new Date(item.timestamp);    const dateKey = `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;    if (!acc[dateKey]) {      acc[dateKey] = [];    }    acc[dateKey].push(item);    return acc;  }, {} as Record<string, EmotionData[]>);  const getDominantEmotion = (dateKey: string) => {    const emotions = emotionDataByDate[dateKey];    if (!emotions || emotions.length === 0) return null;    const emotionCounts = emotions.reduce((acc, item) => {      acc[item.emotion] = (acc[item.emotion] || 0) + 1;      return acc;    }, {} as Record<string, number>);    return Object.entries(emotionCounts).sort((a, b) => b[1] - a[1])[0][0];  };  const getEmotionIcon = (emotion: string) => {    const icons: Record<string, string> = {      happy: 'ðŸ˜Š',      sad: 'ðŸ˜¢',      neutral: 'ðŸ˜',      anxious: 'ðŸ˜°',      stressed: 'ðŸ˜«',      angry: 'ðŸ˜ ',      surprised: 'ðŸ˜²',      disgusted: 'ðŸ¤¢',      focused: 'ðŸŽ¯',      relaxed: 'ðŸ˜Œ'    };    return icons[emotion] || 'â“';  };  const goToPreviousMonth = () => {    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1));  };  const goToNextMonth = () => {    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1));  };  const renderCalendarDays = () => {    const days = [];    for (let i = 0; i < firstDayOfWeek; i++) {      days.push(<div key={`empty-${i}`} className="calendar-day empty"></div>);    }    for (let day = 1; day <= daysInMonth; day++) {      const dateKey = `${currentDate.getFullYear()}-${currentDate.getMonth()}-${day}`;      const dominantEmotion = getDominantEmotion(dateKey);      const emotionIcon = dominantEmotion ? getEmotionIcon(dominantEmotion) : '';      const hasData = emotionDataByDate[dateKey] && emotionDataByDate[dateKey].length > 0;      days.push(        <div           key={day}           className={`calendar-day ${hasData ? 'has-data' : ''} ${dominantEmotion || ''}`}        >          <div className="day-number">{day}</div>          {emotionIcon && <div className="emotion-icon">{emotionIcon}</div>}        </div>      );    }    return days;  };  return (    <div className="emotion-calendar">      <div className="calendar-header">        <button className="nav-button" onClick={goToPreviousMonth}>&lt;</button>        <h3>{currentDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}</h3>        <button className="nav-button" onClick={goToNextMonth}>&gt;</button>      </div>      <div className="calendar-grid">        <div className="calendar-day-header">Sun</div>        <div className="calendar-day-header">Mon</div>        <div className="calendar-day-header">Tue</div>        <div className="calendar-day-header">Wed</div>        <div className="calendar-day-header">Thu</div>        <div className="calendar-day-header">Fri</div>        <div className="calendar-day-header">Sat</div>        {renderCalendarDays()}      </div>    </div>  );};export default EmotionCalendar;