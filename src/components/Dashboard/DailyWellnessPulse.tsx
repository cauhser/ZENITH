import React, { useState, useEffect } from 'react';import { useStore } from '../../store';import { EmotionData } from '../../types/wellness';interface WellnessPulseProps {  onClose: () => void;  isVisible: boolean;  forceShow?: boolean;}const DailyWellnessPulse: React.FC<WellnessPulseProps> = ({ onClose, isVisible, forceShow = false }) => {  const { emotionalTrends, screenTime } = useStore();  const [mood, setMood] = useState(50);  const [stress, setStress] = useState(50);  const [connection, setConnection] = useState(50);  const [showInsight, setShowInsight] = useState(false);  const [shouldShow, setShouldShow] = useState(true);  useEffect(() => {    if (forceShow) {      setShouldShow(true);      return;    }    const lastShown = localStorage.getItem('dailyWellnessPulseLastShown');    const today = new Date().toDateString();    if (lastShown === today) {      setShouldShow(false);    } else {      setShouldShow(true);    }  }, [forceShow]);  useEffect(() => {    if (emotionalTrends.length > 0) {      const yesterdayMood = Math.floor(Math.random() * 30) + 30;       const yesterdayStress = Math.floor(Math.random() * 40) + 30;       const yesterdayConnection = Math.floor(Math.random() * 30) + 40;       setMood(yesterdayMood + Math.floor(Math.random() * 20) - 10);      setStress(yesterdayStress + Math.floor(Math.random() * 20) - 10);      setConnection(yesterdayConnection + Math.floor(Math.random() * 20) - 10);    }  }, [emotionalTrends]);  const handleSubmit = () => {    const today = new Date().toDateString();    localStorage.setItem('dailyWellnessPulseLastShown', today);    setShowInsight(true);    setTimeout(() => {      onClose();    }, 5000);  };  if (!isVisible || !shouldShow) return null;  const MoodSelector = ({ value, onChange, label }: { value: number; onChange: (value: number) => void; label: string }) => {    const options = [      { value: 20, label: 'Very Low', emoji: 'ğŸ˜' },      { value: 40, label: 'Low', emoji: 'ğŸ™' },      { value: 60, label: 'Neutral', emoji: 'ğŸ˜' },      { value: 80, label: 'High', emoji: 'ğŸ™‚' },      { value: 100, label: 'Very High', emoji: 'ğŸ˜„' }    ];    return (      <div className="mood-selector">        <label>{label}</label>        <div className="mood-options">          {options.map((option) => (            <button              key={option.value}              className={`mood-option ${value === option.value ? 'selected' : ''}`}              onClick={() => onChange(option.value)}              title={`${option.emoji} ${option.label}`}            >              {option.emoji}            </button>          ))}        </div>      </div>    );  };  return (    <div className="wellness-pulse-overlay">      <div className="wellness-pulse-modal">        <div className="wellness-pulse-header">          <h2>ğŸŒ… Daily Wellness Pulse</h2>          <p>Quick 60-second check-in</p>        </div>        <div className="wellness-pulse-content">          {!showInsight ? (            <>              <div className="mood-selector-group">                <MoodSelector                   value={mood}                   onChange={setMood}                   label="ğŸ˜Š Mood Today"                 />                <MoodSelector                   value={stress}                   onChange={setStress}                   label="ğŸ˜“ Stress Level"                 />                <MoodSelector                   value={connection}                   onChange={setConnection}                   label="ğŸ‘¥ Social Connection"                 />              </div>              <div className="wellness-pulse-actions">                <button className="btn btn-secondary" onClick={onClose}>                  Skip                </button>                <button className="btn btn-primary" onClick={handleSubmit}>                  Submit Check-in                </button>              </div>            </>          ) : (            <div className="wellness-insight">              <h3>âœ¨ Instant Micro-Insight</h3>              <p>                Your stress is up 18% â€” linked to 42 mins on X after 11 PM.              </p>              <div className="insight-tip">                <strong>ğŸ’¡ Tip:</strong> Try setting a bedtime reminder for 10:30 PM to avoid late-night scrolling.              </div>            </div>          )}        </div>      </div>    </div>  );};export default DailyWellnessPulse;